(function(){function InfoBox(opt_opts){opt_opts=opt_opts||{},google.maps.OverlayView.apply(this,arguments),this.content_=opt_opts.content||"",this.disableAutoPan_=opt_opts.disableAutoPan||!1,this.maxWidth_=opt_opts.maxWidth||0,this.pixelOffset_=opt_opts.pixelOffset||new google.maps.Size(0,0),this.position_=opt_opts.position||new google.maps.LatLng(0,0),this.zIndex_=opt_opts.zIndex||null,this.boxClass_=opt_opts.boxClass||"infoBox",this.boxStyle_=opt_opts.boxStyle||{},this.closeBoxMargin_=opt_opts.closeBoxMargin||"2px",this.closeBoxURL_=opt_opts.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===opt_opts.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=opt_opts.infoBoxClearance||new google.maps.Size(1,1),void 0===opt_opts.visible&&(void 0===opt_opts.isHidden?opt_opts.visible=!0:opt_opts.visible=!opt_opts.isHidden),this.isHidden_=!opt_opts.visible,this.alignBottom_=opt_opts.alignBottom||!1,this.pane_=opt_opts.pane||"floatPane",this.enableEventPropagation_=opt_opts.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function ClusterIcon(cluster,styles){cluster.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=cluster,this.className_=cluster.getMarkerClusterer().getClusterClass(),this.styles_=styles,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(cluster.getMap())}function Cluster(mc){this.markerClusterer_=mc,this.map_=mc.getMap(),this.gridSize_=mc.getGridSize(),this.minClusterSize_=mc.getMinimumClusterSize(),this.averageCenter_=mc.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,mc.getStyles())}function MarkerClusterer(map,opt_markers,opt_options){this.extend(MarkerClusterer,google.maps.OverlayView),opt_markers=opt_markers||[],opt_options=opt_options||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=opt_options.gridSize||60,this.minClusterSize_=opt_options.minimumClusterSize||2,this.maxZoom_=opt_options.maxZoom||null,this.styles_=opt_options.styles||[],this.title_=opt_options.title||"",this.zoomOnClick_=!0,void 0!==opt_options.zoomOnClick&&(this.zoomOnClick_=opt_options.zoomOnClick),this.averageCenter_=!1,void 0!==opt_options.averageCenter&&(this.averageCenter_=opt_options.averageCenter),this.ignoreHidden_=!1,void 0!==opt_options.ignoreHidden&&(this.ignoreHidden_=opt_options.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==opt_options.enableRetinaIcons&&(this.enableRetinaIcons_=opt_options.enableRetinaIcons),this.imagePath_=opt_options.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=opt_options.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=opt_options.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=opt_options.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=opt_options.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=opt_options.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,this.clusterClass_=opt_options.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(opt_markers,!0),this.setMap(map)}function inherits(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype,childCtor.superClass_=parentCtor.prototype,childCtor.prototype=new tempCtor,childCtor.prototype.constructor=childCtor}function MarkerLabel_(marker,crossURL,handCursorURL){this.marker_=marker,this.handCursorURL_=marker.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(crossURL)}function MarkerWithLabel(opt_options){opt_options=opt_options||{},opt_options.labelContent=opt_options.labelContent||"",opt_options.labelAnchor=opt_options.labelAnchor||new google.maps.Point(0,0),opt_options.labelClass=opt_options.labelClass||"markerLabels",opt_options.labelStyle=opt_options.labelStyle||{},opt_options.labelInBackground=opt_options.labelInBackground||!1,void 0===opt_options.labelVisible&&(opt_options.labelVisible=!0),void 0===opt_options.raiseOnDrag&&(opt_options.raiseOnDrag=!0),void 0===opt_options.clickable&&(opt_options.clickable=!0),void 0===opt_options.draggable&&(opt_options.draggable=!1),void 0===opt_options.optimized&&(opt_options.optimized=!1),opt_options.crossImage=opt_options.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",opt_options.handCursor=opt_options.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",opt_options.optimized=!1,this.label=new MarkerLabel_(this,opt_options.crossImage,opt_options.handCursor),google.maps.Marker.apply(this,arguments)}(function(){angular.element(document).ready(function(){if((google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)&&(google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(map,anchor){this._isOpen=!0,this._open(map,anchor)},google.maps.InfoWindow.prototype.close=function(){this._isOpen=!1,this._close()},google.maps.InfoWindow.prototype.isOpen=function(val){return null==val&&(val=void 0),null==val?this._isOpen:this._isOpen=val},window.InfoBox))return window.InfoBox.prototype._open=window.InfoBox.prototype.open,window.InfoBox.prototype._close=window.InfoBox.prototype.close,window.InfoBox.prototype._isOpen=!1,window.InfoBox.prototype.open=function(map,anchor){this._isOpen=!0,this._open(map,anchor)},window.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},window.InfoBox.prototype.isOpen=function(val){return null==val&&(val=void 0),null==val?this._isOpen:this._isOpen=val}})}).call(this),function(){_.intersectionObjects=function(array1,array2,comparison){var res;return null==comparison&&(comparison=void 0),res=_.map(array1,function(obj1){return _.find(array2,function(obj2){return null!=comparison?comparison(obj1,obj2):_.isEqual(obj1,obj2)})}),_.filter(res,function(o){return null!=o})}}.call(this),function(){!function(){var app;app=angular.module("google-maps",[]),app.factory("debounce",["$timeout",function($timeout){return function(fn){var nthCall;return nthCall=0,function(){var argz,later,that;return that=this,argz=arguments,nthCall++,later=function(version){return function(){if(version===nthCall)return fn.apply(that,argz)}}(nthCall),$timeout(later,0,!0)}}}])}()}.call(this),function(){this.ngGmapModule=function(names,fn){var space,_name;return null==fn&&(fn=function(){}),"string"==typeof names&&(names=names.split(".")),space=this[_name=names.shift()]||(this[_name]={}),space.ngGmapModule||(space.ngGmapModule=this.ngGmapModule),names.length?space.ngGmapModule(names,fn):fn.call(space)}}.call(this),function(){angular.module("google-maps").factory("array-sync",["add-events",function(mapEvents){return function(mapArray,scope,pathEval){var isSetFromScope,mapArrayListener,scopeArray,watchListener;return isSetFromScope=!1,scopeArray=scope.$eval(pathEval),mapArrayListener=mapEvents(mapArray,{set_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index))&&value.lng&&value.lat)return scopeArray[index].latitude=value.lat(),scopeArray[index].longitude=value.lng()},insert_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index))&&value.lng&&value.lat)return scopeArray.splice(index,0,{latitude:value.lat(),longitude:value.lng()})},remove_at:function(index){if(!isSetFromScope)return scopeArray.splice(index,1)}}),watchListener=scope.$watchCollection(pathEval,function(newArray){var i,l,newLength,newValue,oldArray,oldLength,oldValue;if(isSetFromScope=!0,oldArray=mapArray,newArray){for(i=0,oldLength=oldArray.getLength(),newLength=newArray.length,l=Math.min(oldLength,newLength),newValue=void 0;i<l;)oldValue=oldArray.getAt(i),newValue=newArray[i],oldValue.lat()===newValue.latitude&&oldValue.lng()===newValue.longitude||oldArray.setAt(i,new google.maps.LatLng(newValue.latitude,newValue.longitude)),i++;for(;i<newLength;)newValue=newArray[i],oldArray.push(new google.maps.LatLng(newValue.latitude,newValue.longitude)),i++;for(;i<oldLength;)oldArray.pop(),i++}return isSetFromScope=!1}),function(){if(mapArrayListener&&(mapArrayListener(),mapArrayListener=null),watchListener)return watchListener(),watchListener=null}}}])}.call(this),function(){angular.module("google-maps").factory("add-events",["$timeout",function($timeout){var addEvent;return addEvent=function(target,eventName,handler){return google.maps.event.addListener(target,eventName,function(){return handler.apply(this,arguments),$timeout(function(){},!0)})},function(target,eventName,handler){var remove;return handler?addEvent(target,eventName,handler):(remove=[],angular.forEach(eventName,function(_handler,key){return remove.push(addEvent(target,key,_handler))}),function(){return angular.forEach(remove,function(fn){if(_.isFunction(fn)&&fn(),null!==fn.e&&_.isFunction(fn.e))return fn.e()}),remove=null})}}])}.call(this),function(){var __indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};this.ngGmapModule("oo",function(){var baseObjectKeywords;return baseObjectKeywords=["extended","included"],this.BaseObject=function(){function BaseObject(){}return BaseObject.extend=function(obj){var key,value,_ref;for(key in obj)value=obj[key],__indexOf.call(baseObjectKeywords,key)<0&&(this[key]=value);return null!=(_ref=obj.extended)&&_ref.apply(0),this},BaseObject.include=function(obj){var key,value,_ref;for(key in obj)value=obj[key],__indexOf.call(baseObjectKeywords,key)<0&&(this.prototype[key]=value);return null!=(_ref=obj.included)&&_ref.apply(0),this},BaseObject}()})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.managers",function(){return this.ClustererMarkerManager=function(_super){function ClustererMarkerManager(gMap,opt_markers,opt_options){this.clear=__bind(this.clear,this),this.draw=__bind(this.draw,this),this.removeMany=__bind(this.removeMany,this),this.remove=__bind(this.remove,this),this.addMany=__bind(this.addMany,this),this.add=__bind(this.add,this);ClustererMarkerManager.__super__.constructor.call(this),this.opt_options=opt_options,this.clusterer=null!=opt_options&&void 0===opt_markers?new MarkerClusterer(gMap,void 0,opt_options):null!=opt_options&&null!=opt_markers?new MarkerClusterer(gMap,opt_markers,opt_options):new MarkerClusterer(gMap),this.clusterer.setIgnoreHidden(!0),this.$log=directives.api.utils.Logger,this.noDrawOnSingleAddRemoves=!0,this.$log.info(this)}return __extends(ClustererMarkerManager,_super),ClustererMarkerManager.prototype.add=function(gMarker){return this.clusterer.addMarker(gMarker,this.noDrawOnSingleAddRemoves)},ClustererMarkerManager.prototype.addMany=function(gMarkers){return this.clusterer.addMarkers(gMarkers)},ClustererMarkerManager.prototype.remove=function(gMarker){return this.clusterer.removeMarker(gMarker,this.noDrawOnSingleAddRemoves)},ClustererMarkerManager.prototype.removeMany=function(gMarkers){return this.clusterer.addMarkers(gMarkers)},ClustererMarkerManager.prototype.draw=function(){return this.clusterer.repaint()},ClustererMarkerManager.prototype.clear=function(){return this.clusterer.clearMarkers(),this.clusterer.repaint()},ClustererMarkerManager}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.managers",function(){return this.MarkerManager=function(_super){function MarkerManager(gMap,opt_markers,opt_options){this.handleOptDraw=__bind(this.handleOptDraw,this),this.clear=__bind(this.clear,this),this.draw=__bind(this.draw,this),this.removeMany=__bind(this.removeMany,this),this.remove=__bind(this.remove,this),this.addMany=__bind(this.addMany,this),this.add=__bind(this.add,this);MarkerManager.__super__.constructor.call(this),this.gMap=gMap,this.gMarkers=[],this.$log=directives.api.utils.Logger,this.$log.info(this)}return __extends(MarkerManager,_super),MarkerManager.prototype.add=function(gMarker,optDraw){return this.handleOptDraw(gMarker,optDraw,!0),this.gMarkers.push(gMarker)},MarkerManager.prototype.addMany=function(gMarkers){var gMarker,_i,_len,_results;for(_results=[],_i=0,_len=gMarkers.length;_i<_len;_i++)gMarker=gMarkers[_i],_results.push(this.add(gMarker));return _results},MarkerManager.prototype.remove=function(gMarker,optDraw){var index,tempIndex;if(this.handleOptDraw(gMarker,optDraw,!1),optDraw)return index=void 0,null!=this.gMarkers.indexOf?index=this.gMarkers.indexOf(gMarker):(tempIndex=0,_.find(this.gMarkers,function(marker){tempIndex+=1,marker===gMarker&&(index=tempIndex)})),null!=index?this.gMarkers.splice(index,1):void 0},MarkerManager.prototype.removeMany=function(gMarkers){var marker,_i,_len,_ref,_results;for(_ref=this.gMarkers,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)marker=_ref[_i],_results.push(this.remove(marker));return _results},MarkerManager.prototype.draw=function(){var deletes,gMarker,_fn,_i,_j,_len,_len1,_ref,_results,_this=this;for(deletes=[],_ref=this.gMarkers,_fn=function(gMarker){if(!gMarker.isDrawn)return gMarker.doAdd?gMarker.setMap(_this.gMap):deletes.push(gMarker)},_i=0,_len=_ref.length;_i<_len;_i++)gMarker=_ref[_i],_fn(gMarker);for(_results=[],_j=0,_len1=deletes.length;_j<_len1;_j++)gMarker=deletes[_j],_results.push(this.remove(gMarker,!0));return _results},MarkerManager.prototype.clear=function(){var gMarker,_i,_len,_ref;for(_ref=this.gMarkers,_i=0,_len=_ref.length;_i<_len;_i++)gMarker=_ref[_i],gMarker.setMap(null);return delete this.gMarkers,this.gMarkers=[]},MarkerManager.prototype.handleOptDraw=function(gMarker,optDraw,doAdd){return!0===optDraw?(doAdd?gMarker.setMap(this.gMap):gMarker.setMap(null),gMarker.isDrawn=!0):(gMarker.isDrawn=!1,gMarker.doAdd=doAdd)},MarkerManager}(oo.BaseObject)})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.AsyncProcessor={handleLargeArray:function(array,callback,pausedCallBack,doneCallBack,chunk,index){var doChunk;return null==chunk&&(chunk=100),null==index&&(index=0),void 0===array||array.length<=0?void doneCallBack():(doChunk=function(){var cnt,i;for(cnt=chunk,i=index;cnt--&&i<array.length;)callback(array[i]),++i;return i<array.length?(index=i,null!=pausedCallBack&&pausedCallBack(),setTimeout(doChunk,1)):doneCallBack()})()}}})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.ChildEvents={onChildCreation:function(child){}}})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.GmapUtil={getLabelPositionPoint:function(anchor){var xPos,yPos;if(void 0!==anchor)return anchor=/^([\d\.]+)\s([\d\.]+)$/.exec(anchor),xPos=anchor[1],yPos=anchor[2],xPos&&yPos?new google.maps.Point(xPos,yPos):void 0},createMarkerOptions:function(coords,icon,defaults,map){var opts;return null==map&&(map=void 0),null==defaults&&(defaults={}),opts=angular.extend({},defaults,{position:null!=defaults.position?defaults.position:new google.maps.LatLng(coords.latitude,coords.longitude),icon:null!=defaults.icon?defaults.icon:icon,visible:null!=defaults.visible?defaults.visible:null!=coords.latitude&&null!=coords.longitude}),null!=map&&(opts.map=map),opts},createWindowOptions:function(gMarker,scope,content,defaults){return null!=content&&null!=defaults?angular.extend({},defaults,{content:null!=defaults.content?defaults.content:content,position:null!=defaults.position?defaults.position:angular.isObject(gMarker)?gMarker.getPosition():new google.maps.LatLng(scope.coords.latitude,scope.coords.longitude)}):defaults||void 0},defaultDelay:50}})}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.utils",function(){return this.Linked=function(_super){function Linked(scope,element,attrs,ctrls){this.scope=scope,this.element=element,this.attrs=attrs,this.ctrls=ctrls}return __extends(Linked,_super),Linked}(oo.BaseObject)})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){var logger;return this.Logger={logger:void 0,doLog:!1,info:function(msg){if(logger.doLog)return null!=logger.logger?logger.logger.info(msg):console.info(msg)},error:function(msg){if(logger.doLog)return null!=logger.logger?logger.logger.error(msg):console.error(msg)}},logger=this.Logger})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.ModelsWatcher={didModelsChange:function(newValue,oldValue){var didModelsChange,hasIntersectionDiff;return _.isArray(newValue)?newValue!==oldValue&&(hasIntersectionDiff=_.intersectionObjects(newValue,oldValue).length!==oldValue.length,didModelsChange=!0,hasIntersectionDiff||(didModelsChange=newValue.length!==oldValue.length),didModelsChange):(directives.api.utils.Logger.error("models property must be an array newValue of: "+newValue.toString()+" is not!!"),!1)}}})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.child",function(){return this.MarkerLabelChildModel=function(_super){function MarkerLabelChildModel(gMarker,opt_options){this.destroy=__bind(this.destroy,this),this.draw=__bind(this.draw,this),this.setPosition=__bind(this.setPosition,this),this.setZIndex=__bind(this.setZIndex,this),this.setVisible=__bind(this.setVisible,this),this.setAnchor=__bind(this.setAnchor,this),this.setMandatoryStyles=__bind(this.setMandatoryStyles,this),this.setStyles=__bind(this.setStyles,this),this.setContent=__bind(this.setContent,this),this.setTitle=__bind(this.setTitle,this),this.getSharedCross=__bind(this.getSharedCross,this);var self,_ref,_ref1;MarkerLabelChildModel.__super__.constructor.call(this),self=this,this.marker=gMarker,this.marker.set("labelContent",opt_options.labelContent),this.marker.set("labelAnchor",this.getLabelPositionPoint(opt_options.labelAnchor)),this.marker.set("labelClass",opt_options.labelClass||"labels"),this.marker.set("labelStyle",opt_options.labelStyle||{opacity:100}),this.marker.set("labelInBackground",opt_options.labelInBackground||!1),opt_options.labelVisible||this.marker.set("labelVisible",!0),opt_options.raiseOnDrag||this.marker.set("raiseOnDrag",!0),opt_options.clickable||this.marker.set("clickable",!0),opt_options.draggable||this.marker.set("draggable",!1),opt_options.optimized||this.marker.set("optimized",!1),opt_options.crossImage=null!=(_ref=opt_options.crossImage)?_ref:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",opt_options.handCursor=null!=(_ref1=opt_options.handCursor)?_ref1:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",this.markerLabel=new MarkerLabel_(this.marker,opt_options.crossImage,opt_options.handCursor),this.marker.set("setMap",function(theMap){return google.maps.Marker.prototype.setMap.apply(this,arguments),self.markerLabel.setMap(theMap)}),this.marker.setMap(this.marker.getMap())}return __extends(MarkerLabelChildModel,_super),MarkerLabelChildModel.include(directives.api.utils.GmapUtil),MarkerLabelChildModel.prototype.getSharedCross=function(crossUrl){return this.markerLabel.getSharedCross(crossUrl)},MarkerLabelChildModel.prototype.setTitle=function(){return this.markerLabel.setTitle()},MarkerLabelChildModel.prototype.setContent=function(){return this.markerLabel.setContent()},MarkerLabelChildModel.prototype.setStyles=function(){return this.markerLabel.setStyles()},MarkerLabelChildModel.prototype.setMandatoryStyles=function(){return this.markerLabel.setMandatoryStyles()},MarkerLabelChildModel.prototype.setAnchor=function(){return this.markerLabel.setAnchor()},MarkerLabelChildModel.prototype.setVisible=function(){return this.markerLabel.setVisible()},MarkerLabelChildModel.prototype.setZIndex=function(){return this.markerLabel.setZIndex()},MarkerLabelChildModel.prototype.setPosition=function(){return this.markerLabel.setPosition()},MarkerLabelChildModel.prototype.draw=function(){return this.markerLabel.draw()},MarkerLabelChildModel.prototype.destroy=function(){if(null!=this.markerLabel.labelDiv_.parentNode&&null!=this.markerLabel.eventDiv_.parentNode)return this.markerLabel.onRemove()},MarkerLabelChildModel}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.child",function(){return this.MarkerChildModel=function(_super){function MarkerChildModel(index,model,parentScope,gMap,$timeout,defaults,doClick,gMarkerManager,$injector){var self,_this=this;this.index=index,this.model=model,this.parentScope=parentScope,this.gMap=gMap,this.defaults=defaults,this.doClick=doClick,this.gMarkerManager=gMarkerManager,this.watchDestroy=__bind(this.watchDestroy,this),this.setLabelOptions=__bind(this.setLabelOptions,this),this.isLabelDefined=__bind(this.isLabelDefined,this),this.setOptions=__bind(this.setOptions,this),this.setIcon=__bind(this.setIcon,this),this.setCoords=__bind(this.setCoords,this),this.destroy=__bind(this.destroy,this),this.maybeSetScopeValue=__bind(this.maybeSetScopeValue,this),this.createMarker=__bind(this.createMarker,this),this.setMyScope=__bind(this.setMyScope,this),self=this,this.iconKey=this.parentScope.icon,this.coordsKey=this.parentScope.coords,this.clickKey=this.parentScope.click(),this.labelContentKey=this.parentScope.labelContent,this.optionsKey=this.parentScope.options,this.labelOptionsKey=this.parentScope.labelOptions,this.myScope=this.parentScope.$new(!1),this.$injector=$injector,this.myScope.model=this.model,this.setMyScope(this.model,void 0,!0),this.createMarker(this.model),this.myScope.$watch("model",function(newValue,oldValue){if(newValue!==oldValue)return _this.setMyScope(newValue,oldValue)},!0),this.$log=directives.api.utils.Logger,this.$log.info(self),this.watchDestroy(this.myScope)}return __extends(MarkerChildModel,_super),MarkerChildModel.include(directives.api.utils.GmapUtil),MarkerChildModel.prototype.setMyScope=function(model,oldModel,isInit){var _this=this;return null==oldModel&&(oldModel=void 0),null==isInit&&(isInit=!1),this.maybeSetScopeValue("icon",model,oldModel,this.iconKey,this.evalModelHandle,isInit,this.setIcon),this.maybeSetScopeValue("coords",model,oldModel,this.coordsKey,this.evalModelHandle,isInit,this.setCoords),this.maybeSetScopeValue("labelContent",model,oldModel,this.labelContentKey,this.evalModelHandle,isInit),_.isFunction(this.clickKey)&&this.$injector?this.myScope.click=function(){return _this.$injector.invoke(_this.clickKey,void 0,{$markerModel:model})}:this.maybeSetScopeValue("click",model,oldModel,this.clickKey,this.evalModelHandle,isInit),this.createMarker(model,oldModel,isInit)},MarkerChildModel.prototype.createMarker=function(model,oldModel,isInit){var _this=this;return null==oldModel&&(oldModel=void 0),null==isInit&&(isInit=!1),this.maybeSetScopeValue("options",model,oldModel,this.optionsKey,function(lModel,lModelKey){var value;if(void 0!==lModel)return value="self"===lModelKey?lModel:lModel[lModelKey],void 0===value?value=void 0===lModelKey?_this.defaults:_this.myScope.options:value},isInit,this.setOptions)},MarkerChildModel.prototype.evalModelHandle=function(model,modelKey){if(void 0!==model)return"self"===modelKey?model:model[modelKey]},MarkerChildModel.prototype.maybeSetScopeValue=function(scopePropName,model,oldModel,modelKey,evaluate,isInit,gSetter){var newValue,oldVal;return null==gSetter&&(gSetter=void 0),void 0===oldModel?(this.myScope[scopePropName]=evaluate(model,modelKey),void(isInit||null!=gSetter&&gSetter(this.myScope))):(oldVal=evaluate(oldModel,modelKey),newValue=evaluate(model,modelKey),newValue===oldVal||this.myScope[scopePropName]===newValue||(this.myScope[scopePropName]=newValue,isInit)?void 0:(null!=gSetter&&gSetter(this.myScope),this.gMarkerManager.draw()))},MarkerChildModel.prototype.destroy=function(){return this.myScope.$destroy()},MarkerChildModel.prototype.setCoords=function(scope){if(scope.$id===this.myScope.$id&&void 0!==this.gMarker)return null!=scope.coords?null==this.scope.coords.latitude||null==this.scope.coords.longitude?void this.$log.error("MarkerChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(this.model)):(this.gMarker.setPosition(new google.maps.LatLng(scope.coords.latitude,scope.coords.longitude)),this.gMarker.setVisible(null!=scope.coords.latitude&&null!=scope.coords.longitude),this.gMarkerManager.remove(this.gMarker),this.gMarkerManager.add(this.gMarker)):this.gMarkerManager.remove(this.gMarker)},MarkerChildModel.prototype.setIcon=function(scope){if(scope.$id===this.myScope.$id&&void 0!==this.gMarker)return this.gMarkerManager.remove(this.gMarker),this.gMarker.setIcon(scope.icon),this.gMarkerManager.add(this.gMarker),this.gMarker.setPosition(new google.maps.LatLng(scope.coords.latitude,scope.coords.longitude)),this.gMarker.setVisible(scope.coords.latitude&&null!=scope.coords.longitude)},MarkerChildModel.prototype.setOptions=function(scope){var _ref,_this=this;if(scope.$id===this.myScope.$id&&(null!=this.gMarker&&(this.gMarkerManager.remove(this.gMarker),delete this.gMarker),null!=(_ref=scope.coords)?_ref:"function"==typeof scope.icon?scope.icon(null!=scope.options):void 0))return this.opts=this.createMarkerOptions(scope.coords,scope.icon,scope.options),delete this.gMarker,this.isLabelDefined(scope)?this.gMarker=new MarkerWithLabel(this.setLabelOptions(this.opts,scope)):this.gMarker=new google.maps.Marker(this.opts),this.gMarkerManager.add(this.gMarker),google.maps.event.addListener(this.gMarker,"click",function(){if(_this.doClick&&null!=_this.myScope.click)return _this.myScope.click()})},MarkerChildModel.prototype.isLabelDefined=function(scope){return null!=scope.labelContent},MarkerChildModel.prototype.setLabelOptions=function(opts,scope){return opts.labelAnchor=this.getLabelPositionPoint(scope.labelAnchor),opts.labelClass=scope.labelClass,opts.labelContent=scope.labelContent,opts},MarkerChildModel.prototype.watchDestroy=function(scope){var _this=this;return scope.$on("$destroy",function(){return null!=_this.gMarker&&(_this.gMarkerManager.remove(_this.gMarker),delete _this.gMarker),void 0})},MarkerChildModel}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.child",function(){return this.WindowChildModel=function(_super){function WindowChildModel(scope,opts,isIconVisibleOnClick,mapCtrl,markerCtrl,$http,$templateCache,$compile,element,needToManualDestroy){this.element=element,null==needToManualDestroy&&(needToManualDestroy=!1),this.destroy=__bind(this.destroy,this),this.hideWindow=__bind(this.hideWindow,this),this.getLatestPosition=__bind(this.getLatestPosition,this),this.showWindow=__bind(this.showWindow,this),this.handleClick=__bind(this.handleClick,this),this.watchCoords=__bind(this.watchCoords,this),this.watchShow=__bind(this.watchShow,this),this.createGWin=__bind(this.createGWin,this),this.scope=scope,this.googleMapsHandles=[],this.opts=opts,this.mapCtrl=mapCtrl,this.markerCtrl=markerCtrl,this.isIconVisibleOnClick=isIconVisibleOnClick,this.initialMarkerVisibility=null!=this.markerCtrl&&this.markerCtrl.getVisible(),this.$log=directives.api.utils.Logger,this.$http=$http,this.$templateCache=$templateCache,this.$compile=$compile,this.createGWin(),null!=this.markerCtrl&&this.markerCtrl.setClickable(!0),this.handleClick(),this.watchShow(),this.watchCoords(),this.needToManualDestroy=needToManualDestroy,this.$log.info(this)}return __extends(WindowChildModel,_super),WindowChildModel.include(directives.api.utils.GmapUtil),WindowChildModel.prototype.createGWin=function(){var defaults,html,_this=this;if(null==this.gWin&&null!=this.markerCtrl&&(defaults=null!=this.opts?this.opts:{},html=null!=this.element&&_.isFunction(this.element.html)?this.element.html():this.element,this.opts=null!=this.markerCtrl?this.createWindowOptions(this.markerCtrl,this.scope,html,defaults):{}),null!=this.opts&&void 0===this.gWin)return this.opts.boxClass&&window.InfoBox&&"function"==typeof window.InfoBox?this.gWin=new window.InfoBox(this.opts):this.gWin=new google.maps.InfoWindow(this.opts),this.googleMapsHandles.push(google.maps.event.addListener(this.gWin,"closeclick",function(){if(null!=_this.markerCtrl&&_this.markerCtrl.setVisible(_this.initialMarkerVisibility),_this.gWin.isOpen(!1),null!=_this.scope.closeClick)return _this.scope.closeClick()}))},WindowChildModel.prototype.watchShow=function(){var _this=this;return this.scope.$watch("show",function(newValue,oldValue){return newValue?_this.showWindow():_this.hideWindow()})},WindowChildModel.prototype.watchCoords=function(){var scope,_this=this;return scope=null!=this.markerCtrl?this.scope.$parent:this.scope,scope.$watch("coords",function(newValue,oldValue){if(newValue!==oldValue)return null==newValue?_this.hideWindow():null==newValue.latitude||null==newValue.longitude?void _this.$log.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(_this.model)):_this.gWin.setPosition(new google.maps.LatLng(newValue.latitude,newValue.longitude))},!0)},WindowChildModel.prototype.handleClick=function(){var _this=this;if(null!=this.markerCtrl)return this.googleMapsHandles.push(google.maps.event.addListener(this.markerCtrl,"click",function(){var pos;return null==_this.gWin&&_this.createGWin(),pos=_this.markerCtrl.getPosition(),null!=_this.gWin&&(_this.gWin.setPosition(pos),_this.showWindow()),_this.initialMarkerVisibility=_this.markerCtrl.getVisible(),_this.markerCtrl.setVisible(_this.isIconVisibleOnClick)}))},WindowChildModel.prototype.showWindow=function(){var show,_this=this;return show=function(){
if(_this.gWin&&(_this.scope.show||null==_this.scope.show)&&!_this.gWin.isOpen())return _this.gWin.open(_this.mapCtrl)},this.scope.templateUrl?this.gWin?this.$http.get(this.scope.templateUrl,{cache:this.$templateCache}).then(function(content){var compiled,templateScope;return templateScope=_this.scope.$new(),angular.isDefined(_this.scope.templateParameter)&&(templateScope.parameter=_this.scope.templateParameter),compiled=_this.$compile(content.data)(templateScope),_this.gWin.setContent(compiled[0]),show()}):void 0:show()},WindowChildModel.prototype.getLatestPosition=function(){if(null!=this.gWin&&null!=this.markerCtrl)return this.gWin.setPosition(this.markerCtrl.getPosition())},WindowChildModel.prototype.hideWindow=function(){if(null!=this.gWin&&this.gWin.isOpen())return this.gWin.close()},WindowChildModel.prototype.destroy=function(){return this.hideWindow(),_.each(this.googleMapsHandles,function(h){return google.maps.event.removeListener(h)}),this.googleMapsHandles.length=0,null!=this.scope&&this.needToManualDestroy&&this.scope.$destroy(),delete this.gWin,void 0},WindowChildModel}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.parent",function(){return this.IMarkerParentModel=function(_super){function IMarkerParentModel(scope,element,attrs,mapCtrl,$timeout){var _this=this;this.scope=scope,this.element=element,this.attrs=attrs,this.mapCtrl=mapCtrl,this.$timeout=$timeout,this.linkInit=__bind(this.linkInit,this),this.onDestroy=__bind(this.onDestroy,this),this.onWatch=__bind(this.onWatch,this),this.watch=__bind(this.watch,this),this.validateScope=__bind(this.validateScope,this),this.onTimeOut=__bind(this.onTimeOut,this),this.$log=directives.api.utils.Logger,this.validateScope(scope)&&(this.doClick=angular.isDefined(attrs.click),null!=scope.options&&(this.DEFAULTS=scope.options),this.$timeout(function(){return _this.watch("coords",scope),_this.watch("icon",scope),_this.watch("options",scope),_this.onTimeOut(scope),scope.$on("$destroy",function(){return _this.onDestroy(scope)})}))}return __extends(IMarkerParentModel,_super),IMarkerParentModel.prototype.DEFAULTS={},IMarkerParentModel.prototype.isFalse=function(value){return-1!==["false","FALSE",0,"n","N","no","NO"].indexOf(value)},IMarkerParentModel.prototype.onTimeOut=function(scope){},IMarkerParentModel.prototype.validateScope=function(scope){var ret;return null!=scope&&(ret=null!=scope.coords,ret||this.$log.error(this.constructor.name+": no valid coords attribute found"),ret)},IMarkerParentModel.prototype.watch=function(propNameToWatch,scope){var _this=this;return scope.$watch(propNameToWatch,function(newValue,oldValue){if(newValue!==oldValue)return _this.onWatch(propNameToWatch,scope,newValue,oldValue)},!0)},IMarkerParentModel.prototype.onWatch=function(propNameToWatch,scope,newValue,oldValue){throw new Exception("Not Implemented!!")},IMarkerParentModel.prototype.onDestroy=function(scope){throw new Exception("Not Implemented!!")},IMarkerParentModel.prototype.linkInit=function(element,mapCtrl,scope,animate){throw new Exception("Not Implemented!!")},IMarkerParentModel}(oo.BaseObject)})}.call(this),function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.parent",function(){return this.IWindowParentModel=function(_super){function IWindowParentModel(scope,element,attrs,ctrls,$timeout,$compile,$http,$templateCache){this.$log=directives.api.utils.Logger,this.$timeout=$timeout,this.$compile=$compile,this.$http=$http,this.$templateCache=$templateCache,null!=scope.options&&(this.DEFAULTS=scope.options)}return __extends(IWindowParentModel,_super),IWindowParentModel.include(directives.api.utils.GmapUtil),IWindowParentModel.prototype.DEFAULTS={},IWindowParentModel}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.parent",function(){return this.LayerParentModel=function(_super){function LayerParentModel(scope,element,attrs,mapCtrl,$timeout,onLayerCreated,$log){var _this=this;if(this.scope=scope,this.element=element,this.attrs=attrs,this.mapCtrl=mapCtrl,this.$timeout=$timeout,this.onLayerCreated=null!=onLayerCreated?onLayerCreated:void 0,this.$log=null!=$log?$log:directives.api.utils.Logger,this.createGoogleLayer=__bind(this.createGoogleLayer,this),null==this.attrs.type)return void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!");this.createGoogleLayer(),this.gMap=void 0,this.doShow=!0,this.$timeout(function(){return _this.gMap=mapCtrl.getMap(),angular.isDefined(_this.attrs.show)&&(_this.doShow=_this.scope.show),null!==_this.doShow&&_this.doShow&&null!==_this.gMap&&_this.layer.setMap(_this.gMap),_this.scope.$watch("show",function(newValue,oldValue){if(newValue!==oldValue)return _this.doShow=newValue,newValue?_this.layer.setMap(_this.gMap):_this.layer.setMap(null)},!0),_this.scope.$watch("options",function(newValue,oldValue){if(newValue!==oldValue)return _this.layer.setMap(null),_this.layer=null,_this.createGoogleLayer()},!0),_this.scope.$on("$destroy",function(){return _this.layer.setMap(null)})})}return __extends(LayerParentModel,_super),LayerParentModel.prototype.createGoogleLayer=function(){var _this=this;return null==this.attrs.options?this.layer=void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:this.layer=void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),this.$timeout(function(){var fn;if(null!=_this.layer&&null!=_this.onLayerCreated&&(fn=_this.onLayerCreated(_this.scope,_this.layer)))return fn(_this.layer)})},LayerParentModel}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.parent",function(){return this.MarkerParentModel=function(_super){function MarkerParentModel(scope,element,attrs,mapCtrl,$timeout){this.onDestroy=__bind(this.onDestroy,this),this.onWatch=__bind(this.onWatch,this),this.onTimeOut=__bind(this.onTimeOut,this);MarkerParentModel.__super__.constructor.call(this,scope,element,attrs,mapCtrl,$timeout)}return __extends(MarkerParentModel,_super),MarkerParentModel.include(directives.api.utils.GmapUtil),MarkerParentModel.prototype.onTimeOut=function(scope){var opts,_this=this;return opts=this.createMarkerOptions(scope.coords,scope.icon,scope.options,this.mapCtrl.getMap()),this.scope.gMarker=new google.maps.Marker(opts),google.maps.event.addListener(this.scope.gMarker,"click",function(){if(_this.doClick&&null!=scope.click)return _this.$timeout(function(){return _this.scope.click()})}),this.setEvents(this.scope.gMarker,scope),this.$log.info(this)},MarkerParentModel.prototype.onWatch=function(propNameToWatch,scope){switch(propNameToWatch){case"coords":return null!=scope.coords&&null!=this.scope.gMarker?(this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(new google.maps.LatLng(scope.coords.latitude,scope.coords.longitude)),this.scope.gMarker.setVisible(null!=scope.coords.latitude&&null!=scope.coords.longitude),this.scope.gMarker.setOptions(scope.options)):this.scope.gMarker.setMap(null);case"icon":if(null!=scope.icon&&null!=scope.coords&&null!=this.scope.gMarker)return this.scope.gMarker.setOptions(scope.options),this.scope.gMarker.setIcon(scope.icon),this.scope.gMarker.setMap(null),this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(new google.maps.LatLng(scope.coords.latitude,scope.coords.longitude)),this.scope.gMarker.setVisible(scope.coords.latitude&&null!=scope.coords.longitude);break;case"options":if(null!=scope.coords&&null!=scope.icon&&scope.options)return null!=this.scope.gMarker&&this.scope.gMarker.setMap(null),delete this.scope.gMarker,this.scope.gMarker=new google.maps.Marker(this.createMarkerOptions(scope.coords,scope.icon,scope.options,this.mapCtrl.getMap()))}},MarkerParentModel.prototype.onDestroy=function(scope){return void 0===this.scope.gMarker?void void 0:(this.scope.gMarker.setMap(null),delete this.scope.gMarker,void 0)},MarkerParentModel.prototype.setEvents=function(marker,scope){if(angular.isDefined(scope.events)&&null!=scope.events&&angular.isObject(scope.events))return _.compact(_.each(scope.events,function(eventHandler,eventName){if(scope.events.hasOwnProperty(eventName)&&angular.isFunction(scope.events[eventName]))return google.maps.event.addListener(marker,eventName,function(){return eventHandler.apply(scope,[marker,eventName,arguments])})}))},MarkerParentModel}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.parent",function(){return this.MarkersParentModel=function(_super){function MarkersParentModel(scope,element,attrs,mapCtrl,$timeout,$injector){this.fit=__bind(this.fit,this),this.onDestroy=__bind(this.onDestroy,this),this.onWatch=__bind(this.onWatch,this),this.reBuildMarkers=__bind(this.reBuildMarkers,this),this.createMarkers=__bind(this.createMarkers,this),this.validateScope=__bind(this.validateScope,this),this.onTimeOut=__bind(this.onTimeOut,this);MarkersParentModel.__super__.constructor.call(this,scope,element,attrs,mapCtrl,$timeout,$injector),this.markersIndex=0,this.gMarkerManager=void 0,this.scope=scope,this.scope.markerModels=[],this.bigGulp=directives.api.utils.AsyncProcessor,this.$timeout=$timeout,this.$injector=$injector,this.$log.info(this)}return __extends(MarkersParentModel,_super),MarkersParentModel.include(directives.api.utils.ModelsWatcher),MarkersParentModel.prototype.onTimeOut=function(scope){return this.watch("models",scope),this.watch("doCluster",scope),this.watch("clusterOptions",scope),this.watch("fit",scope),this.createMarkers(scope)},MarkersParentModel.prototype.validateScope=function(scope){var modelsNotDefined;return modelsNotDefined=angular.isUndefined(scope.models)||void 0===scope.models,modelsNotDefined&&this.$log.error(this.constructor.name+": no valid models attribute found"),MarkersParentModel.__super__.validateScope.call(this,scope)||modelsNotDefined},MarkersParentModel.prototype.createMarkers=function(scope){var markers,_this=this;return null!=scope.doCluster&&!0===scope.doCluster?null!=scope.clusterOptions?void 0===this.gMarkerManager?this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap(),void 0,scope.clusterOptions):this.gMarkerManager.opt_options!==scope.clusterOptions&&(this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap(),void 0,scope.clusterOptions)):this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap()):this.gMarkerManager=new directives.api.managers.MarkerManager(this.mapCtrl.getMap()),markers=[],scope.isMarkerModelsReady=!1,this.bigGulp.handleLargeArray(scope.models,function(model){var child;return scope.doRebuild=!0,child=new directives.api.models.child.MarkerChildModel(_this.markersIndex,model,scope,_this.mapCtrl,_this.$timeout,_this.DEFAULTS,_this.doClick,_this.gMarkerManager,_this.$injector),_this.$log.info("child",child,"markers",markers),markers.push(child),_this.markersIndex++},function(){},function(){if(_this.gMarkerManager.draw(),scope.markerModels=markers,angular.isDefined(_this.attrs.fit)&&null!=scope.fit&&scope.fit&&_this.fit(),scope.isMarkerModelsReady=!0,null!=scope.onMarkerModelsReady)return scope.onMarkerModelsReady(scope)})},MarkersParentModel.prototype.reBuildMarkers=function(scope){if(scope.doRebuild||void 0===scope.doRebuild)return _.each(scope.markerModels,function(oldM){return oldM.destroy()}),this.markersIndex=0,null!=this.gMarkerManager&&this.gMarkerManager.clear(),this.createMarkers(scope)},MarkersParentModel.prototype.onWatch=function(propNameToWatch,scope,newValue,oldValue){if("models"!==propNameToWatch||this.didModelsChange(newValue,oldValue))return"options"===propNameToWatch&&null!=newValue?void(this.DEFAULTS=newValue):this.reBuildMarkers(scope)},MarkersParentModel.prototype.onDestroy=function(scope){var model,_i,_len,_ref;for(_ref=scope.markerModels,_i=0,_len=_ref.length;_i<_len;_i++)model=_ref[_i],model.destroy();if(null!=this.gMarkerManager)return this.gMarkerManager.clear()},MarkersParentModel.prototype.fit=function(){var bounds,everSet;if(this.mapCtrl&&null!=this.scope.markerModels&&this.scope.markerModels.length>0&&(bounds=new google.maps.LatLngBounds,everSet=!1,_.each(this.scope.markerModels,function(childModelMarker){if(null!=childModelMarker.gMarker)return everSet||(everSet=!0),bounds.extend(childModelMarker.gMarker.getPosition())}),everSet))return this.mapCtrl.getMap().fitBounds(bounds)},MarkersParentModel}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api.models.parent",function(){return this.WindowsParentModel=function(_super){function WindowsParentModel(scope,element,attrs,ctrls,$timeout,$compile,$http,$templateCache,$interpolate){this.interpolateContent=__bind(this.interpolateContent,this),this.setChildScope=__bind(this.setChildScope,this),this.createWindow=__bind(this.createWindow,this),this.setContentKeys=__bind(this.setContentKeys,this),this.createChildScopesWindows=__bind(this.createChildScopesWindows,this),this.onMarkerModelsReady=__bind(this.onMarkerModelsReady,this),this.watchOurScope=__bind(this.watchOurScope,this),this.destroy=__bind(this.destroy,this),this.watchDestroy=__bind(this.watchDestroy,this),this.watchModels=__bind(this.watchModels,this),this.watch=__bind(this.watch,this);var name,self,_i,_len,_ref,_this=this;for(WindowsParentModel.__super__.constructor.call(this,scope,element,attrs,ctrls,$timeout,$compile,$http,$templateCache,$interpolate),self=this,this.$interpolate=$interpolate,this.windows=[],this.windwsIndex=0,this.scopePropNames=["show","coords","templateUrl","templateParameter","isIconVisibleOnClick","closeClick"],_ref=this.scopePropNames,_i=0,_len=_ref.length;_i<_len;_i++)name=_ref[_i],this[name+"Key"]=void 0;this.linked=new directives.api.utils.Linked(scope,element,attrs,ctrls),this.models=void 0,this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.bigGulp=directives.api.utils.AsyncProcessor,this.$log.info(self),this.$timeout(function(){return _this.watchOurScope(scope),_this.createChildScopesWindows()},50)}return __extends(WindowsParentModel,_super),WindowsParentModel.include(directives.api.utils.ModelsWatcher),WindowsParentModel.prototype.watch=function(scope,name,nameKey){var _this=this;return scope.$watch(name,function(newValue,oldValue){if(newValue!==oldValue)return _this[nameKey]="function"==typeof newValue?newValue():newValue,_.each(_this.windows,function(model){return model.scope[name]="self"===_this[nameKey]?model:model[_this[nameKey]]})},!0)},WindowsParentModel.prototype.watchModels=function(scope){var _this=this;return scope.$watch("models",function(newValue,oldValue){if(_this.didModelsChange(newValue,oldValue))return _this.destroy(),_this.createChildScopesWindows()})},WindowsParentModel.prototype.watchDestroy=function(scope){var _this=this;return scope.$on("$destroy",function(){return _this.destroy()})},WindowsParentModel.prototype.destroy=function(){return _.each(this.windows,function(model){return model.destroy()}),delete this.windows,this.windows=[],this.windowsIndex=0},WindowsParentModel.prototype.watchOurScope=function(scope){var _this=this;return _.each(this.scopePropNames,function(name){var nameKey;return nameKey=name+"Key",_this[nameKey]="function"==typeof scope[name]?scope[name]():scope[name],_this.watch(scope,name,nameKey)})},WindowsParentModel.prototype.onMarkerModelsReady=function(scope){var _this=this;return this.destroy(),this.models=scope.models,this.firstTime&&this.watchDestroy(scope),this.setContentKeys(scope.models),this.bigGulp.handleLargeArray(scope.markerModels,function(mm){return _this.createWindow(mm.model,mm.gMarker,_this.gMap)},function(){},function(){return _this.firstTime=!1})},WindowsParentModel.prototype.createChildScopesWindows=function(){var markersScope,_this=this;if(this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),this.gMap=this.linked.ctrls[0].getMap(),markersScope=this.linked.ctrls.length>1&&null!=this.linked.ctrls[1]?this.linked.ctrls[1].getMarkersScope():void 0,angular.isUndefined(this.linked.scope.models)&&(void 0===markersScope||void 0===markersScope.markerModels&&void 0===markersScope.models))return void this.$log.info("No models to create windows from! Need direct models or models derrived from markers!");if(null!=this.gMap){if(null!=this.linked.scope.models)return this.models=this.linked.scope.models,this.firstTime&&(this.watchModels(this.linked.scope),this.watchDestroy(this.linked.scope)),this.setContentKeys(this.linked.scope.models),this.bigGulp.handleLargeArray(this.linked.scope.models,function(model){return _this.createWindow(model,void 0,_this.gMap)},function(){},function(){return _this.firstTime=!1});if(markersScope.onMarkerModelsReady=this.onMarkerModelsReady,markersScope.isMarkerModelsReady)return this.onMarkerModelsReady(markersScope)}},WindowsParentModel.prototype.setContentKeys=function(models){if(models.length>0)return this.contentKeys=Object.keys(models[0])},WindowsParentModel.prototype.createWindow=function(model,gMarker,gMap){var childScope,opts,parsedContent,_this=this;return childScope=this.linked.scope.$new(!1),this.setChildScope(childScope,model),childScope.$watch("model",function(newValue,oldValue){if(newValue!==oldValue)return _this.setChildScope(childScope,newValue)},!0),parsedContent=this.interpolateContent(this.linked.element.html(),model),opts=this.createWindowOptions(gMarker,childScope,parsedContent,this.DEFAULTS),this.windows.push(new directives.api.models.child.WindowChildModel(childScope,opts,this.isIconVisibleOnClick,gMap,gMarker,this.$http,this.$templateCache,this.$compile,void 0,!0))},WindowsParentModel.prototype.setChildScope=function(childScope,model){var name,_fn,_i,_len,_ref,_this=this;for(_ref=this.scopePropNames,_fn=function(name){var nameKey,newValue;if(nameKey=name+"Key",(newValue="self"===_this[nameKey]?model:model[_this[nameKey]])!==childScope[name])return childScope[name]=newValue},_i=0,_len=_ref.length;_i<_len;_i++)name=_ref[_i],_fn(name);return childScope.model=model},WindowsParentModel.prototype.interpolateContent=function(content,model){var exp,interpModel,key,_i,_len,_ref;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(exp=this.$interpolate(content),interpModel={},_ref=this.contentKeys,_i=0,_len=_ref.length;_i<_len;_i++)key=_ref[_i],interpModel[key]=model[key];return exp(interpModel)}},WindowsParentModel}(directives.api.models.parent.IWindowParentModel)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.ILabel=function(_super){function ILabel($timeout){this.link=__bind(this.link,this);this.restrict="ECMA",this.replace=!0,this.template=void 0,this.require=void 0,this.transclude=!0,this.priority=-100,this.scope={labelContent:"=content",labelAnchor:"@anchor",labelClass:"@class",labelStyle:"=style"},this.$log=directives.api.utils.Logger,this.$timeout=$timeout}return __extends(ILabel,_super),ILabel.prototype.link=function(scope,element,attrs,ctrl){throw new Exception("Not Implemented!!")},ILabel}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.IMarker=function(_super){function IMarker($timeout){this.link=__bind(this.link,this);this.$log=directives.api.utils.Logger,this.$timeout=$timeout,this.restrict="ECMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events"}}return __extends(IMarker,_super),IMarker.prototype.controller=["$scope","$element",function($scope,$element){throw new Exception("Not Implemented!!")}],IMarker.prototype.link=function(scope,element,attrs,ctrl){throw new Exception("Not implemented!!")},IMarker}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.IWindow=function(_super){function IWindow($timeout,$compile,$http,$templateCache){this.$timeout=$timeout,this.$compile=$compile,this.$http=$http,this.$templateCache=$templateCache,this.link=__bind(this.link,this),this.restrict="ECMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require=void 0,this.replace=!0,this.scope={coords:"=coords",show:"=show",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options"},this.$log=directives.api.utils.Logger}return __extends(IWindow,_super),IWindow.include(directives.api.utils.ChildEvents),IWindow.prototype.link=function(scope,element,attrs,ctrls){throw new Exception("Not Implemented!!")},IWindow}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.Label=function(_super){function Label($timeout){this.link=__bind(this.link,this);Label.__super__.constructor.call(this,$timeout),this.require="^marker",this.template='<span class="angular-google-maps-marker-label" ng-transclude></span>',this.$log.info(this)}return __extends(Label,_super),Label.prototype.link=function(scope,element,attrs,ctrl){return this.$timeout(function(){var label,markerCtrl;return markerCtrl=ctrl.getMarkerScope().gMarker,null!=markerCtrl&&(label=new directives.api.models.child.MarkerLabelChildModel(markerCtrl,scope)),scope.$on("$destroy",function(){return label.destroy()})},directives.api.utils.GmapUtil.defaultDelay+25)},Label}(directives.api.ILabel)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.Layer=function(_super){function Layer($timeout){this.$timeout=$timeout,this.link=__bind(this.link,this),this.$log=directives.api.utils.Logger,this.restrict="ECMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return __extends(Layer,_super),Layer.prototype.link=function(scope,element,attrs,mapCtrl){return null!=attrs.oncreated?new directives.api.models.parent.LayerParentModel(scope,element,attrs,mapCtrl,this.$timeout,scope.onCreated):new directives.api.models.parent.LayerParentModel(scope,element,attrs,mapCtrl,this.$timeout)},Layer}(oo.BaseObject)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.Marker=function(_super){function Marker($timeout){this.link=__bind(this.link,this);Marker.__super__.constructor.call(this,$timeout),this.template='<span class="angular-google-map-marker" ng-transclude></span>',this.$log.info(this)}return __extends(Marker,_super),Marker.prototype.controller=["$scope","$element",function($scope,$element){return{getMarkerScope:function(){return $scope}}}],Marker.prototype.link=function(scope,element,attrs,ctrl){return new directives.api.models.parent.MarkerParentModel(scope,element,attrs,ctrl,this.$timeout)},Marker}(directives.api.IMarker)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.Markers=function(_super){function Markers($timeout,$injector){this.link=__bind(this.link,this);Markers.__super__.constructor.call(this,$timeout),this.template='<span class="angular-google-map-markers" ng-transclude></span>',this.scope.models="=models",this.scope.doCluster="=docluster",this.scope.clusterOptions="=clusteroptions",this.scope.fit="=fit",this.scope.labelContent="=labelcontent",this.scope.labelAnchor="@labelanchor",this.scope.labelClass="@labelclass",this.$timeout=$timeout,this.$injector=$injector,this.$log.info(this)}return __extends(Markers,_super),Markers.prototype.controller=["$scope","$element",function($scope,$element){return{getMarkersScope:function(){return $scope}}}],Markers.prototype.link=function(scope,element,attrs,ctrl){return new directives.api.models.parent.MarkersParentModel(scope,element,attrs,ctrl,this.$timeout,this.$injector)},Markers}(directives.api.IMarker)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.Window=function(_super){function Window($timeout,$compile,$http,$templateCache){this.link=__bind(this.link,this);var self;Window.__super__.constructor.call(this,$timeout,$compile,$http,$templateCache),self=this,this.require=["^googleMap","^?marker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',this.$log.info(self)}return __extends(Window,_super),Window.include(directives.api.utils.GmapUtil),Window.prototype.link=function(scope,element,attrs,ctrls){var _this=this;return this.$timeout(function(){var defaults,hasScopeCoords,isIconVisibleOnClick,mapCtrl,markerCtrl,markerScope,opts,window;if(isIconVisibleOnClick=!0,angular.isDefined(attrs.isiconvisibleonclick)&&(isIconVisibleOnClick=scope.isIconVisibleOnClick),mapCtrl=ctrls[0].getMap(),markerCtrl=ctrls.length>1&&null!=ctrls[1]?ctrls[1].getMarkerScope().gMarker:void 0,defaults=null!=scope.options?scope.options:{},hasScopeCoords=null!=scope&&null!=scope.coords&&null!=scope.coords.latitude&&null!=scope.coords.longitude,opts=hasScopeCoords?_this.createWindowOptions(markerCtrl,scope,element.html(),defaults):defaults,null!=mapCtrl&&(window=new directives.api.models.child.WindowChildModel(scope,opts,isIconVisibleOnClick,mapCtrl,markerCtrl,_this.$http,_this.$templateCache,_this.$compile,element)),scope.$on("$destroy",function(){return window.destroy()}),null!=ctrls[1]&&(markerScope=ctrls[1].getMarkerScope(),markerScope.$watch("coords",function(newValue,oldValue){if(null==newValue)return window.hideWindow()}),markerScope.$watch("coords.latitude",function(newValue,oldValue){if(newValue!==oldValue)return window.getLatestPosition()})),null!=_this.onChildCreation&&null!=window)return _this.onChildCreation(window)},directives.api.utils.GmapUtil.defaultDelay+25)},Window}(directives.api.IWindow)})}.call(this),function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};this.ngGmapModule("directives.api",function(){return this.Windows=function(_super){function Windows($timeout,$compile,$http,$templateCache,$interpolate){this.link=__bind(this.link,this);var self;Windows.__super__.constructor.call(this,$timeout,$compile,$http,$templateCache),self=this,this.$interpolate=$interpolate,this.require=["^googleMap","^?markers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',this.scope.models="=models",this.$log.info(self)}return __extends(Windows,_super),Windows.prototype.link=function(scope,element,attrs,ctrls){return new directives.api.models.parent.WindowsParentModel(scope,element,attrs,ctrls,this.$timeout,this.$compile,this.$http,this.$templateCache,this.$interpolate)},Windows}(directives.api.IWindow)})
}.call(this),function(){angular.module("google-maps").directive("googleMap",["$log","$timeout",function($log,$timeout){"use strict";var DEFAULTS,getCoords,isTrue;return isTrue=function(val){return angular.isDefined(val)&&null!==val&&!0===val||"1"===val||"y"===val||"true"===val},directives.api.utils.Logger.logger=$log,DEFAULTS={mapTypeId:google.maps.MapTypeId.ROADMAP},getCoords=function(value){return new google.maps.LatLng(value.latitude,value.longitude)},{self:this,restrict:"ECMA",transclude:!0,replace:!1,template:'<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',scope:{center:"=center",zoom:"=zoom",dragging:"=dragging",control:"=",windows:"=windows",options:"=options",events:"=events",styles:"=styles",bounds:"=bounds"},controller:["$scope",function($scope){return{getMap:function(){return $scope.map}}}],link:function(scope,element,attrs){var dragging,el,eventName,getEventHandler,opts,settingCenterFromScope,type,_m;if(!angular.isDefined(scope.center)||!angular.isDefined(scope.center.latitude)||!angular.isDefined(scope.center.longitude))return void $log.error("angular-google-maps: could not find a valid center property");if(!angular.isDefined(scope.zoom))return void $log.error("angular-google-maps: map zoom property not set");if(el=angular.element(element),el.addClass("angular-google-map"),opts={options:{}},attrs.options&&(opts.options=scope.options),attrs.styles&&(opts.styles=scope.styles),attrs.type&&(type=attrs.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(type)?opts.mapTypeId=google.maps.MapTypeId[attrs.type.toUpperCase()]:$log.error('angular-google-maps: invalid map type "'+attrs.type+'"')),_m=new google.maps.Map(el.find("div")[1],angular.extend({},DEFAULTS,opts,{center:new google.maps.LatLng(scope.center.latitude,scope.center.longitude),draggable:isTrue(attrs.draggable),zoom:scope.zoom,bounds:scope.bounds})),dragging=!1,google.maps.event.addListener(_m,"dragstart",function(){return dragging=!0,_.defer(function(){return scope.$apply(function(s){if(null!=s.dragging)return s.dragging=dragging})})}),google.maps.event.addListener(_m,"dragend",function(){return dragging=!1,_.defer(function(){return scope.$apply(function(s){if(null!=s.dragging)return s.dragging=dragging})})}),google.maps.event.addListener(_m,"drag",function(){var c;return c=_m.center,_.defer(function(){return scope.$apply(function(s){return s.center.latitude=c.lat(),s.center.longitude=c.lng()})})}),google.maps.event.addListener(_m,"zoom_changed",function(){if(scope.zoom!==_m.zoom)return _.defer(function(){return scope.$apply(function(s){return s.zoom=_m.zoom})})}),settingCenterFromScope=!1,google.maps.event.addListener(_m,"center_changed",function(){var c;if(c=_m.center,!settingCenterFromScope)return _.defer(function(){return scope.$apply(function(s){if(!_m.dragging&&(s.center.latitude!==c.lat()&&(s.center.latitude=c.lat()),s.center.longitude!==c.lng()))return s.center.longitude=c.lng()})})}),google.maps.event.addListener(_m,"idle",function(){var b,ne,sw;return b=_m.getBounds(),ne=b.getNorthEast(),sw=b.getSouthWest(),_.defer(function(){return scope.$apply(function(s){if(null!==s.bounds&&void 0!==s.bounds&&void 0!==s.bounds)return s.bounds.northeast={latitude:ne.lat(),longitude:ne.lng()},s.bounds.southwest={latitude:sw.lat(),longitude:sw.lng()}})})}),angular.isDefined(scope.events)&&null!==scope.events&&angular.isObject(scope.events)){getEventHandler=function(eventName){return function(){return scope.events[eventName].apply(scope,[_m,eventName,arguments])}};for(eventName in scope.events)scope.events.hasOwnProperty(eventName)&&angular.isFunction(scope.events[eventName])&&google.maps.event.addListener(_m,eventName,getEventHandler(eventName))}return scope.map=_m,null!=attrs.control&&null!=scope.control&&(scope.control.refresh=function(maybeCoords){var coords;if(null!=_m)return google.maps.event.trigger(_m,"resize"),null!=(null!=maybeCoords?maybeCoords.latitude:void 0)&&null!=(null!=maybeCoords?maybeCoords.latitude:void 0)?(coords=getCoords(maybeCoords),isTrue(attrs.pan)?_m.panTo(coords):_m.setCenter(coords)):void 0},scope.control.getGMap=function(){return _m}),scope.$watch("center",function(newValue,oldValue){var coords;if(coords=getCoords(newValue),newValue!==oldValue&&(coords.lat()!==_m.center.lat()||coords.lng()!==_m.center.lng()))return settingCenterFromScope=!0,dragging||(null!=newValue.latitude&&null!=newValue.longitude||$log.error("Invalid center for newValue: "+JSON.stringify(newValue)),isTrue(attrs.pan)&&scope.zoom===_m.zoom?_m.panTo(coords):_m.setCenter(coords)),settingCenterFromScope=!1},!0),scope.$watch("zoom",function(newValue,oldValue){if(newValue!==oldValue&&newValue!==_m.zoom)return _.defer(function(){return _m.setZoom(newValue)})}),scope.$watch("bounds",function(newValue,oldValue){var bounds,ne,sw;if(newValue!==oldValue)return null==newValue.northeast.latitude||null==newValue.northeast.longitude||null==newValue.southwest.latitude||null==newValue.southwest.longitude?void $log.error("Invalid map bounds for new value: "+JSON.stringify(newValue)):(ne=new google.maps.LatLng(newValue.northeast.latitude,newValue.northeast.longitude),sw=new google.maps.LatLng(newValue.southwest.latitude,newValue.southwest.longitude),bounds=new google.maps.LatLngBounds(sw,ne),_m.fitBounds(bounds))}),scope.$watch("options",function(newValue,oldValue){if(!_.isEqual(newValue,oldValue)&&(opts.options=newValue,null!=_m))return _m.setOptions(opts)},!0),scope.$watch("styles",function(newValue,oldValue){if(!_.isEqual(newValue,oldValue)&&(opts.styles=newValue,null!=_m))return _m.setOptions(opts)},!0)}}}])}.call(this),function(){angular.module("google-maps").directive("marker",["$timeout",function($timeout){return new directives.api.Marker($timeout)}])}.call(this),function(){angular.module("google-maps").directive("markers",["$timeout","$injector",function($timeout,$injector){return new directives.api.Markers($timeout,$injector)}])}.call(this),function(){angular.module("google-maps").directive("markerLabel",["$log","$timeout",function($log,$timeout){return new directives.api.Label($timeout)}])}.call(this),function(){angular.module("google-maps").directive("polygon",["$log","$timeout",function($log,$timeout){var DEFAULTS,convertPathPoints,extendMapBounds,isTrue,validatePathPoints;return validatePathPoints=function(path){var i;for(i=0;i<path.length;){if(angular.isUndefined(path[i].latitude)||angular.isUndefined(path[i].longitude))return!1;i++}return!0},convertPathPoints=function(path){var i,result;for(result=new google.maps.MVCArray,i=0;i<path.length;)result.push(new google.maps.LatLng(path[i].latitude,path[i].longitude)),i++;return result},extendMapBounds=function(map,points){var bounds,i;for(bounds=new google.maps.LatLngBounds,i=0;i<points.length;)bounds.extend(points.getAt(i)),i++;return map.fitBounds(bounds)},isTrue=function(val){return angular.isDefined(val)&&null!==val&&!0===val||"1"===val||"y"===val||"true"===val},DEFAULTS={},{restrict:"ECA",require:"^googleMap",replace:!0,scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"="},link:function(scope,element,attrs,mapCtrl){return angular.isUndefined(scope.path)||null===scope.path||scope.path.length<2||!validatePathPoints(scope.path)?void $log.error("polyline: no valid path attribute found"):$timeout(function(){var map,opts,pathInsertAtListener,pathPoints,pathRemoveAtListener,pathSetAtListener,polyPath,polyline;return map=mapCtrl.getMap(),pathPoints=convertPathPoints(scope.path),opts=angular.extend({},DEFAULTS,{map:map,path:pathPoints,strokeColor:scope.stroke&&scope.stroke.color,strokeOpacity:scope.stroke&&scope.stroke.opacity,strokeWeight:scope.stroke&&scope.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(defaultValue,key){return angular.isUndefined(scope[key])||null===scope[key]?opts[key]=defaultValue:opts[key]=scope[key]}),polyline=new google.maps.Polyline(opts),isTrue(attrs.fit)&&extendMapBounds(map,pathPoints),angular.isDefined(scope.editable)&&scope.$watch("editable",function(newValue,oldValue){return polyline.setEditable(newValue)}),angular.isDefined(scope.draggable)&&scope.$watch("draggable",function(newValue,oldValue){return polyline.setDraggable(newValue)}),angular.isDefined(scope.visible)&&scope.$watch("visible",function(newValue,oldValue){return polyline.setVisible(newValue)}),pathSetAtListener=void 0,pathInsertAtListener=void 0,pathRemoveAtListener=void 0,polyPath=polyline.getPath(),pathSetAtListener=google.maps.event.addListener(polyPath,"set_at",function(index){var value;if((value=polyPath.getAt(index))&&value.lng&&value.lat)return scope.path[index].latitude=value.lat(),scope.path[index].longitude=value.lng(),scope.$apply()}),pathInsertAtListener=google.maps.event.addListener(polyPath,"insert_at",function(index){var value;if((value=polyPath.getAt(index))&&value.lng&&value.lat)return scope.path.splice(index,0,{latitude:value.lat(),longitude:value.lng()}),scope.$apply()}),pathRemoveAtListener=google.maps.event.addListener(polyPath,"remove_at",function(index){return scope.path.splice(index,1),scope.$apply()}),scope.$watch("path",function(newArray){var i,l,newLength,newValue,oldArray,oldLength,oldValue;if(oldArray=polyline.getPath(),newArray!==oldArray){if(!newArray)return polyline.setMap(null);for(polyline.setMap(map),i=0,oldLength=oldArray.getLength(),newLength=newArray.length,l=Math.min(oldLength,newLength);i<l;)oldValue=oldArray.getAt(i),newValue=newArray[i],oldValue.lat()===newValue.latitude&&oldValue.lng()===newValue.longitude||oldArray.setAt(i,new google.maps.LatLng(newValue.latitude,newValue.longitude)),i++;for(;i<newLength;)newValue=newArray[i],oldArray.push(new google.maps.LatLng(newValue.latitude,newValue.longitude)),i++;for(;i<oldLength;)oldArray.pop(),i++;if(isTrue(attrs.fit))return extendMapBounds(map,oldArray)}},!0),scope.$on("$destroy",function(){return polyline.setMap(null),pathSetAtListener(),pathSetAtListener=null,pathInsertAtListener(),pathInsertAtListener=null,pathRemoveAtListener(),pathRemoveAtListener=null})})}}}])}.call(this),function(){angular.module("google-maps").directive("polyline",["$log","$timeout","array-sync",function($log,$timeout,arraySync){var DEFAULTS,convertPathPoints,extendMapBounds,isTrue,validatePathPoints;return validatePathPoints=function(path){var i;for(i=0;i<path.length;){if(angular.isUndefined(path[i].latitude)||angular.isUndefined(path[i].longitude))return!1;i++}return!0},convertPathPoints=function(path){var i,result;for(result=new google.maps.MVCArray,i=0;i<path.length;)result.push(new google.maps.LatLng(path[i].latitude,path[i].longitude)),i++;return result},extendMapBounds=function(map,points){var bounds,i;for(bounds=new google.maps.LatLngBounds,i=0;i<points.length;)bounds.extend(points.getAt(i)),i++;return map.fitBounds(bounds)},isTrue=function(val){return angular.isDefined(val)&&null!==val&&!0===val||"1"===val||"y"===val||"true"===val},DEFAULTS={},{restrict:"ECA",replace:!0,require:"^googleMap",scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"="},link:function(scope,element,attrs,mapCtrl){return angular.isUndefined(scope.path)||null===scope.path||scope.path.length<2||!validatePathPoints(scope.path)?void $log.error("polyline: no valid path attribute found"):$timeout(function(){var arraySyncer,buildOpts,map,polyline;return buildOpts=function(pathPoints){var opts;return opts=angular.extend({},DEFAULTS,{map:map,path:pathPoints,strokeColor:scope.stroke&&scope.stroke.color,strokeOpacity:scope.stroke&&scope.stroke.opacity,strokeWeight:scope.stroke&&scope.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(defaultValue,key){return angular.isUndefined(scope[key])||null===scope[key]?opts[key]=defaultValue:opts[key]=scope[key]}),opts},map=mapCtrl.getMap(),polyline=new google.maps.Polyline(buildOpts(convertPathPoints(scope.path))),isTrue(attrs.fit)&&extendMapBounds(map,pathPoints),angular.isDefined(scope.editable)&&scope.$watch("editable",function(newValue,oldValue){return polyline.setEditable(newValue)}),angular.isDefined(scope.draggable)&&scope.$watch("draggable",function(newValue,oldValue){return polyline.setDraggable(newValue)}),angular.isDefined(scope.visible)&&scope.$watch("visible",function(newValue,oldValue){return polyline.setVisible(newValue)}),angular.isDefined(scope.geodesic)&&scope.$watch("geodesic",function(newValue,oldValue){return polyline.setOptions(buildOpts(polyline.getPath()))}),angular.isDefined(scope.stroke)&&angular.isDefined(scope.stroke.weight)&&scope.$watch("stroke.weight",function(newValue,oldValue){return polyline.setOptions(buildOpts(polyline.getPath()))}),angular.isDefined(scope.stroke)&&angular.isDefined(scope.stroke.color)&&scope.$watch("stroke.color",function(newValue,oldValue){return polyline.setOptions(buildOpts(polyline.getPath()))}),arraySyncer=arraySync(polyline.getPath(),scope,"path"),scope.$on("$destroy",function(){if(polyline.setMap(null),arraySyncer)return arraySyncer(),arraySyncer=null})})}}}])}.call(this),function(){angular.module("google-maps").directive("window",["$timeout","$compile","$http","$templateCache",function($timeout,$compile,$http,$templateCache){return new directives.api.Window($timeout,$compile,$http,$templateCache)}])}.call(this),function(){angular.module("google-maps").directive("windows",["$timeout","$compile","$http","$templateCache","$interpolate",function($timeout,$compile,$http,$templateCache,$interpolate){return new directives.api.Windows($timeout,$compile,$http,$templateCache,$interpolate)}])}.call(this),function(){angular.module("google-maps").directive("layer",["$timeout",function($timeout){return new directives.api.Layer($timeout)}])}.call(this),InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var i,events,bw,me=this,cancelHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},ignoreHandler=function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),me.enableEventPropagation_||cancelHandler(e)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),void 0===this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(bw=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-bw.left-bw.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],events=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],i=0;i<events.length;i++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,events[i],cancelHandler));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",ignoreHandler),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var img="";return""!==this.closeBoxURL_&&(img="<img",img+=" src='"+this.closeBoxURL_+"'",img+=" align=right",img+=" style='",img+=" position: relative;",img+=" cursor: pointer;",img+=" margin: "+this.closeBoxMargin_+";",img+="'>"),img},InfoBox.prototype.addClickHandler_=function(){var closeBox;""!==this.closeBoxURL_?(closeBox=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(closeBox,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var me=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(me,"closeclick"),me.close()}},InfoBox.prototype.panBox_=function(disablePan){var map,xOffset=0,yOffset=0;if(!disablePan&&(map=this.getMap())instanceof google.maps.Map){map.getBounds().contains(this.position_)||map.setCenter(this.position_),map.getBounds();var mapDiv=map.getDiv(),mapWidth=mapDiv.offsetWidth,mapHeight=mapDiv.offsetHeight,iwOffsetX=this.pixelOffset_.width,iwOffsetY=this.pixelOffset_.height,iwWidth=this.div_.offsetWidth,iwHeight=this.div_.offsetHeight,padX=this.infoBoxClearance_.width,padY=this.infoBoxClearance_.height,pixPosition=this.getProjection().fromLatLngToContainerPixel(this.position_);if(pixPosition.x<-iwOffsetX+padX?xOffset=pixPosition.x+iwOffsetX-padX:pixPosition.x+iwWidth+iwOffsetX+padX>mapWidth&&(xOffset=pixPosition.x+iwWidth+iwOffsetX+padX-mapWidth),this.alignBottom_?pixPosition.y<-iwOffsetY+padY+iwHeight?yOffset=pixPosition.y+iwOffsetY-padY-iwHeight:pixPosition.y+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwOffsetY+padY-mapHeight):pixPosition.y<-iwOffsetY+padY?yOffset=pixPosition.y+iwOffsetY-padY:pixPosition.y+iwHeight+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwHeight+iwOffsetY+padY-mapHeight),0!==xOffset||0!==yOffset){map.getCenter();map.panBy(xOffset,yOffset)}}},InfoBox.prototype.setBoxStyle_=function(){var i,boxStyle;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",boxStyle=this.boxStyle_;for(i in boxStyle)boxStyle.hasOwnProperty(i)&&(this.div_.style[i]=boxStyle[i]);void 0!==this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var computedStyle,bw={top:0,bottom:0,left:0,right:0},box=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(computedStyle=box.ownerDocument.defaultView.getComputedStyle(box,""))&&(bw.top=parseInt(computedStyle.borderTopWidth,10)||0,bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||0,bw.left=parseInt(computedStyle.borderLeftWidth,10)||0,bw.right=parseInt(computedStyle.borderRightWidth,10)||0):document.documentElement.currentStyle&&box.currentStyle&&(bw.top=parseInt(box.currentStyle.borderTopWidth,10)||0,bw.bottom=parseInt(box.currentStyle.borderBottomWidth,10)||0,bw.left=parseInt(box.currentStyle.borderLeftWidth,10)||0,bw.right=parseInt(box.currentStyle.borderRightWidth,10)||0),bw},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var pixPosition=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=pixPosition.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(pixPosition.y+this.pixelOffset_.height)+"px":this.div_.style.top=pixPosition.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},InfoBox.prototype.setOptions=function(opt_opts){void 0!==opt_opts.boxClass&&(this.boxClass_=opt_opts.boxClass,this.setBoxStyle_()),void 0!==opt_opts.boxStyle&&(this.boxStyle_=opt_opts.boxStyle,this.setBoxStyle_()),void 0!==opt_opts.content&&this.setContent(opt_opts.content),void 0!==opt_opts.disableAutoPan&&(this.disableAutoPan_=opt_opts.disableAutoPan),void 0!==opt_opts.maxWidth&&(this.maxWidth_=opt_opts.maxWidth),void 0!==opt_opts.pixelOffset&&(this.pixelOffset_=opt_opts.pixelOffset),void 0!==opt_opts.alignBottom&&(this.alignBottom_=opt_opts.alignBottom),void 0!==opt_opts.position&&this.setPosition(opt_opts.position),void 0!==opt_opts.zIndex&&this.setZIndex(opt_opts.zIndex),void 0!==opt_opts.closeBoxMargin&&(this.closeBoxMargin_=opt_opts.closeBoxMargin),void 0!==opt_opts.closeBoxURL&&(this.closeBoxURL_=opt_opts.closeBoxURL),void 0!==opt_opts.infoBoxClearance&&(this.infoBoxClearance_=opt_opts.infoBoxClearance),void 0!==opt_opts.isHidden&&(this.isHidden_=opt_opts.isHidden),void 0!==opt_opts.visible&&(this.isHidden_=!opt_opts.visible),void 0!==opt_opts.enableEventPropagation&&(this.enableEventPropagation_=opt_opts.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(content){this.content_=content,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),void 0===content.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+content:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(content)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px",void 0===content.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+content:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(content))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(latlng){this.position_=latlng,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(index){this.zIndex_=index,this.div_&&(this.div_.style.zIndex=index),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(isVisible){this.isHidden_=!isVisible,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){return void 0!==this.getMap()&&null!==this.getMap()&&!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(map,anchor){var me=this;anchor&&(this.position_=anchor.getPosition(),this.moveListener_=google.maps.event.addListener(anchor,"position_changed",function(){me.setPosition(this.getPosition())})),this.setMap(map),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var i;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(i=0;i<this.eventListeners_.length;i++)google.maps.event.removeListener(this.eventListeners_[i]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},ClusterIcon.prototype.onAdd=function(){var cMouseDownInCluster,cDraggingMapByCluster,cClusterIcon=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){cDraggingMapByCluster=cMouseDownInCluster}),google.maps.event.addDomListener(this.div_,"mousedown",function(){cMouseDownInCluster=!0,cDraggingMapByCluster=!1}),google.maps.event.addDomListener(this.div_,"click",function(e){if(cMouseDownInCluster=!1,!cDraggingMapByCluster){var theBounds,mz,mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"click",cClusterIcon.cluster_),google.maps.event.trigger(mc,"clusterclick",cClusterIcon.cluster_),mc.getZoomOnClick()&&(mz=mc.getMaxZoom(),theBounds=cClusterIcon.cluster_.getBounds(),mc.getMap().fitBounds(theBounds),setTimeout(function(){mc.getMap().fitBounds(theBounds),null!==mz&&mc.getMap().getZoom()>mz&&mc.getMap().setZoom(mz+1)},100)),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"mouseover",cClusterIcon.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"mouseout",cClusterIcon.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.top=pos.y+"px",this.div_.style.left=pos.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var img="",bp=this.backgroundPosition_.split(" "),spriteH=parseInt(bp[0].trim(),10),spriteV=parseInt(bp[1].trim(),10),pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos),img="<img src='"+this.url_+"' style='position: absolute; top: "+spriteV+"px; left: "+spriteH+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(img+="clip: rect("+-1*spriteV+"px, "+(-1*spriteH+this.width_)+"px, "+(-1*spriteV+this.height_)+"px, "+-1*spriteH+"px);"),img+="'>",this.div_.innerHTML=img+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(sums){this.sums_=sums;var index=Math.max(0,sums.index-1);index=Math.min(this.styles_.length-1,index);var style=this.styles_[index];this.url_=style.url,this.height_=style.height,this.width_=style.width,this.anchorText_=style.anchorText||[0,0],this.anchorIcon_=style.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=style.textColor||"black",this.textSize_=style.textSize||11,this.textDecoration_=style.textDecoration||"none",this.fontWeight_=style.fontWeight||"bold",this.fontStyle_=style.fontStyle||"normal",this.fontFamily_=style.fontFamily||"Arial,sans-serif",this.backgroundPosition_=style.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(center){this.center_=center},ClusterIcon.prototype.createCss=function(pos){var style=[];return style.push("cursor: pointer;"),style.push("position: absolute; top: "+pos.y+"px; left: "+pos.x+"px;"),style.push("width: "+this.width_+"px; height: "+this.height_+"px;"),style.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(latlng){var pos=this.getProjection().fromLatLngToDivPixel(latlng);return pos.x-=this.anchorIcon_[1],pos.y-=this.anchorIcon_[0],pos.x=parseInt(pos.x,10),pos.y=parseInt(pos.y,10),pos},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var i,bounds=new google.maps.LatLngBounds(this.center_,this.center_),markers=this.getMarkers();for(i=0;i<markers.length;i++)bounds.extend(markers[i].getPosition());return bounds},Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(marker){var i,mCount,mz;if(this.isMarkerAlreadyAdded_(marker))return!1;if(this.center_){if(this.averageCenter_){var l=this.markers_.length+1,lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l,lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng),this.calculateBounds_()}}else this.center_=marker.getPosition(),this.calculateBounds_();if(marker.isAdded=!0,this.markers_.push(marker),mCount=this.markers_.length,null!==(mz=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>mz)marker.getMap()!==this.map_&&marker.setMap(this.map_);else if(mCount<this.minClusterSize_)marker.getMap()!==this.map_&&marker.setMap(this.map_);else if(mCount===this.minClusterSize_)for(i=0;i<mCount;i++)this.markers_[i].setMap(null);else marker.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(marker){return this.bounds_.contains(marker.getPosition())},Cluster.prototype.calculateBounds_=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(bounds)},Cluster.prototype.updateIcon_=function(){var mCount=this.markers_.length,mz=this.markerClusterer_.getMaxZoom();if(null!==mz&&this.map_.getZoom()>mz)return void this.clusterIcon_.hide();if(mCount<this.minClusterSize_)return void this.clusterIcon_.hide();var numStyles=this.markerClusterer_.getStyles().length,sums=this.markerClusterer_.getCalculator()(this.markers_,numStyles);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(sums),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(marker){var i;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(marker);for(i=0;i<this.markers_.length;i++)if(marker===this.markers_[i])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var cMarkerClusterer=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){cMarkerClusterer.resetViewport_(!1),this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){cMarkerClusterer.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var i;for(i=0;i<this.markers_.length;i++)this.markers_[i].getMap()!==this.activeMap_&&this.markers_[i].setMap(this.activeMap_);for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();for(this.clusters_=[],i=0;i<this.listeners_.length;i++)google.maps.event.removeListener(this.listeners_[i]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var i,size;if(!(this.styles_.length>0))for(i=0;i<this.imageSizes_.length;i++)size=this.imageSizes_[i],this.styles_.push({url:this.imagePath_+(i+1)+"."+this.imageExtension_,height:size,width:size})},MarkerClusterer.prototype.fitMapToMarkers=function(){var i,markers=this.getMarkers(),bounds=new google.maps.LatLngBounds;for(i=0;i<markers.length;i++)bounds.extend(markers[i].getPosition());this.getMap().fitBounds(bounds)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(gridSize){this.gridSize_=gridSize},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(minimumClusterSize){this.minClusterSize_=minimumClusterSize},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(maxZoom){this.maxZoom_=maxZoom},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(styles){this.styles_=styles},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(title){this.title_=title},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.setZoomOnClick=function(zoomOnClick){this.zoomOnClick_=zoomOnClick},
MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(averageCenter){this.averageCenter_=averageCenter},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(ignoreHidden){this.ignoreHidden_=ignoreHidden},MarkerClusterer.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},MarkerClusterer.prototype.setEnableRetinaIcons=function(enableRetinaIcons){this.enableRetinaIcons_=enableRetinaIcons},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(imageExtension){this.imageExtension_=imageExtension},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(imagePath){this.imagePath_=imagePath},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(imageSizes){this.imageSizes_=imageSizes},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(calculator){this.calculator_=calculator},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(batchSizeIE){this.batchSizeIE_=batchSizeIE},MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_},MarkerClusterer.prototype.setClusterClass=function(clusterClass){this.clusterClass_=clusterClass},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(marker,opt_nodraw){this.pushMarkerTo_(marker),opt_nodraw||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(markers,opt_nodraw){var key;for(key in markers)markers.hasOwnProperty(key)&&this.pushMarkerTo_(markers[key]);opt_nodraw||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(marker){if(marker.getDraggable()){var cMarkerClusterer=this;google.maps.event.addListener(marker,"dragend",function(){cMarkerClusterer.ready_&&(this.isAdded=!1,cMarkerClusterer.repaint())})}marker.isAdded=!1,this.markers_.push(marker)},MarkerClusterer.prototype.removeMarker=function(marker,opt_nodraw){var removed=this.removeMarker_(marker);return!opt_nodraw&&removed&&this.repaint(),removed},MarkerClusterer.prototype.removeMarkers=function(markers,opt_nodraw){var i,r,removed=!1;for(i=0;i<markers.length;i++)r=this.removeMarker_(markers[i]),removed=removed||r;return!opt_nodraw&&removed&&this.repaint(),removed},MarkerClusterer.prototype.removeMarker_=function(marker){var i,index=-1;if(this.markers_.indexOf)index=this.markers_.indexOf(marker);else for(i=0;i<this.markers_.length;i++)if(marker===this.markers_[i]){index=i;break}return-1!==index&&(marker.setMap(null),this.markers_.splice(index,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var oldClusters=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var i;for(i=0;i<oldClusters.length;i++)oldClusters[i].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(bounds){var projection=this.getProjection(),tr=new google.maps.LatLng(bounds.getNorthEast().lat(),bounds.getNorthEast().lng()),bl=new google.maps.LatLng(bounds.getSouthWest().lat(),bounds.getSouthWest().lng()),trPix=projection.fromLatLngToDivPixel(tr);trPix.x+=this.gridSize_,trPix.y-=this.gridSize_;var blPix=projection.fromLatLngToDivPixel(bl);blPix.x-=this.gridSize_,blPix.y+=this.gridSize_;var ne=projection.fromDivPixelToLatLng(trPix),sw=projection.fromDivPixelToLatLng(blPix);return bounds.extend(ne),bounds.extend(sw),bounds},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(opt_hide){var i,marker;for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();for(this.clusters_=[],i=0;i<this.markers_.length;i++)marker=this.markers_[i],marker.isAdded=!1,opt_hide&&marker.setMap(null)},MarkerClusterer.prototype.distanceBetweenPoints_=function(p1,p2){var dLat=(p2.lat()-p1.lat())*Math.PI/180,dLon=(p2.lng()-p1.lng())*Math.PI/180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(p1.lat()*Math.PI/180)*Math.cos(p2.lat()*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371},MarkerClusterer.prototype.isMarkerInBounds_=function(marker,bounds){return bounds.contains(marker.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(marker){var i,d,cluster,center,distance=4e4,clusterToAddTo=null;for(i=0;i<this.clusters_.length;i++)cluster=this.clusters_[i],(center=cluster.getCenter())&&(d=this.distanceBetweenPoints_(center,marker.getPosition()))<distance&&(distance=d,clusterToAddTo=cluster);clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)?clusterToAddTo.addMarker(marker):(cluster=new Cluster(this),cluster.addMarker(marker),this.clusters_.push(cluster))},MarkerClusterer.prototype.createClusters_=function(iFirst){var i,marker,mapBounds,cMarkerClusterer=this;if(this.ready_){0===iFirst&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),mapBounds=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var bounds=this.getExtendedBounds(mapBounds),iLast=Math.min(iFirst+this.batchSize_,this.markers_.length);for(i=iFirst;i<iLast;i++)marker=this.markers_[i],!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)&&(!this.ignoreHidden_||this.ignoreHidden_&&marker.getVisible())&&this.addToClosestCluster_(marker);iLast<this.markers_.length?this.timerRefStatic=setTimeout(function(){cMarkerClusterer.createClusters_(iLast)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(obj1,obj2){return function(object){var property;for(property in object.prototype)this.prototype[property]=object.prototype[property];return this}.apply(obj1,[obj2])},MarkerClusterer.CALCULATOR=function(markers,numStyles){for(var index=0,count=markers.length.toString(),dv=count;0!==dv;)dv=parseInt(dv/10,10),index++;return index=Math.min(index,numStyles),{text:count,index:index,title:""}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(crossURL){var div;return void 0===MarkerLabel_.getSharedCross.crossDiv&&(div=document.createElement("img"),div.style.cssText="position: absolute; z-index: 1000002; display: none;",div.style.marginLeft="-8px",div.style.marginTop="-9px",div.src=crossURL,MarkerLabel_.getSharedCross.crossDiv=div),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){var cSavedZIndex,cLatOffset,cLngOffset,cIgnoreClick,cRaiseEnabled,cStartPosition,cStartCenter,me=this,cMouseIsDown=!1,cDraggingLabel=!1,cDraggingCursor="url("+this.handCursorURL_+")",cAbortEvent=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},cStopBounce=function(){me.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),void 0===MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(me.marker_,"mouseover",e))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(e){!me.marker_.getDraggable()&&!me.marker_.getClickable()||cDraggingLabel||(this.style.cursor=me.marker_.getCursor(),google.maps.event.trigger(me.marker_,"mouseout",e))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(e){cDraggingLabel=!1,me.marker_.getDraggable()&&(cMouseIsDown=!0,this.style.cursor=cDraggingCursor),(me.marker_.getDraggable()||me.marker_.getClickable())&&(google.maps.event.trigger(me.marker_,"mousedown",e),cAbortEvent(e))}),google.maps.event.addDomListener(document,"mouseup",function(mEvent){var position;if(cMouseIsDown&&(cMouseIsDown=!1,me.eventDiv_.style.cursor="pointer",google.maps.event.trigger(me.marker_,"mouseup",mEvent)),cDraggingLabel){if(cRaiseEnabled){position=me.getProjection().fromLatLngToDivPixel(me.marker_.getPosition()),position.y+=20,me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position));try{me.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(cStopBounce,1406)}catch(e){}}me.crossDiv_.style.display="none",me.marker_.setZIndex(cSavedZIndex),cIgnoreClick=!0,cDraggingLabel=!1,mEvent.latLng=me.marker_.getPosition(),google.maps.event.trigger(me.marker_,"dragend",mEvent)}}),google.maps.event.addListener(me.marker_.getMap(),"mousemove",function(mEvent){var position;cMouseIsDown&&(cDraggingLabel?(mEvent.latLng=new google.maps.LatLng(mEvent.latLng.lat()-cLatOffset,mEvent.latLng.lng()-cLngOffset),position=me.getProjection().fromLatLngToDivPixel(mEvent.latLng),cRaiseEnabled&&(me.crossDiv_.style.left=position.x+"px",me.crossDiv_.style.top=position.y+"px",me.crossDiv_.style.display="",position.y-=20),me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position)),cRaiseEnabled&&(me.eventDiv_.style.top=position.y+20+"px"),google.maps.event.trigger(me.marker_,"drag",mEvent)):(cLatOffset=mEvent.latLng.lat()-me.marker_.getPosition().lat(),cLngOffset=mEvent.latLng.lng()-me.marker_.getPosition().lng(),cSavedZIndex=me.marker_.getZIndex(),cStartPosition=me.marker_.getPosition(),cStartCenter=me.marker_.getMap().getCenter(),cRaiseEnabled=me.marker_.get("raiseOnDrag"),cDraggingLabel=!0,me.marker_.setZIndex(1e6),mEvent.latLng=me.marker_.getPosition(),google.maps.event.trigger(me.marker_,"dragstart",mEvent)))}),google.maps.event.addDomListener(document,"keydown",function(e){cDraggingLabel&&27===e.keyCode&&(cRaiseEnabled=!1,me.marker_.setPosition(cStartPosition),me.marker_.getMap().setCenter(cStartCenter),google.maps.event.trigger(document,"mouseup",e))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(cIgnoreClick?cIgnoreClick=!1:(google.maps.event.trigger(me.marker_,"click",e),cAbortEvent(e)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(google.maps.event.trigger(me.marker_,"dblclick",e),cAbortEvent(e))}),google.maps.event.addListener(this.marker_,"dragstart",function(mEvent){cDraggingLabel||(cRaiseEnabled=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(mEvent){cDraggingLabel||cRaiseEnabled&&(me.setPosition(20),me.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(mEvent){cDraggingLabel||cRaiseEnabled&&me.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){me.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){me.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){me.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){me.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){me.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){me.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){me.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){me.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){me.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var i;for(null!==this.labelDiv_.parentNode&&this.labelDiv_.parentNode.removeChild(this.labelDiv_),null!==this.eventDiv_.parentNode&&this.eventDiv_.parentNode.removeChild(this.eventDiv_),i=0;i<this.listeners_.length;i++)google.maps.event.removeListener(this.listeners_[i])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var content=this.marker_.get("labelContent");void 0===content.nodeType?(this.labelDiv_.innerHTML=content,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(content),content=content.cloneNode(!0),this.eventDiv_.appendChild(content))},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var i,labelStyle;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",labelStyle=this.marker_.get("labelStyle");for(i in labelStyle)labelStyle.hasOwnProperty(i)&&(this.labelDiv_.style[i]=labelStyle[i],this.eventDiv_.style[i]=labelStyle[i]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden",void 0!==this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var anchor=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-anchor.x+"px",this.labelDiv_.style.marginTop=-anchor.y+"px",this.eventDiv_.style.marginLeft=-anchor.x+"px",this.eventDiv_.style.marginTop=-anchor.y+"px"},MarkerLabel_.prototype.setPosition=function(yOffset){var position=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());void 0===yOffset&&(yOffset=0),this.labelDiv_.style.left=Math.round(position.x)+"px",this.labelDiv_.style.top=Math.round(position.y-yOffset)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var zAdjust=this.marker_.get("labelInBackground")?-1:1;void 0===this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+zAdjust,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+zAdjust,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},MarkerLabel_.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(theMap){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(theMap)}}).call(this);
